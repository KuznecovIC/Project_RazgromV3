/* frontend/src/components/MessageHub.css */

.mh-root{
  position: relative;
  width: 100%;
  min-height: 100vh;
  padding: 18px 0 18px;
}

/* Beams –≤—Å–µ–≥–¥–∞ –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω */
.mh-bg{
  position: fixed;
  inset: 0;
  z-index: 0;
  opacity: 0.55;
  pointer-events: none;
}

/* –ö–æ–Ω—Ç–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å –º–æ–∂–µ—Ç –∑–∞–Ω–∏–º–∞—Ç—å –≤—Å—é —à–∏—Ä–∏–Ω—É */
.mh-shell{
  position: relative;
  z-index: 1;
  width: 100%;
  max-width: none;
  margin: 0;
  padding: 0 24px; /* —á—Ç–æ–±—ã –Ω–µ –ª–∏–ø–ª–æ –∫ –∫—Ä–∞—è–º */
}

.mh-topbar{
  display: flex;
  gap: 14px;
  align-items: center;
  justify-content: space-between;

  padding: 14px;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(0,0,0,0.26);
  backdrop-filter: blur(18px);
  box-shadow: 0 18px 80px rgba(132,86,255,0.12);
  margin-bottom: 14px;
}

.mh-search{
  flex: 1;
  min-width: 0;
  position: relative;
}

.mh-search-input{
  width: 100%;
  height: 44px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.08);
  color: #fff;
  outline: none;
  padding: 0 14px;
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.62rem;
}

.mh-search-input:focus{
  border-color: rgba(132,86,255,0.6);
  box-shadow: 0 0 0 3px rgba(132,86,255,0.18);
}

.mh-actions{
  display: flex;
  gap: 8px;
}

.mh-btn{
  width: 44px;
  height: 44px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.08);
  color: #fff;
  cursor: pointer;
  backdrop-filter: blur(14px);
  transition: transform .12s ease, background .12s ease, border-color .12s ease;
}

.mh-btn:hover{
  transform: translateY(-2px);
  border-color: rgba(132,86,255,0.55);
  background: rgba(132,86,255,0.18);
}

/* ===== Main layout (left + resizer + center + right) ===== */
.mh-layout{
  display: flex;
  width: 100%;
  height: calc(100vh - 160px);
  gap: 24px; /* ‚Üê –û–¢–°–¢–£–ü –ú–ï–ñ–î–£ –ö–û–õ–û–ù–ö–ê–ú–ò */
}

/* LEFT PANEL */
.mh-left{
  flex: 0 0 auto;
  min-width: 72px;
  max-width: 320px;
  overflow: hidden;
  position: relative;
  
  height: 100%;
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(0,0,0,0.26);
  backdrop-filter: blur(18px);
  box-shadow: 0 18px 90px rgba(0,0,0,0.25);
  
  display: flex;
  flex-direction: column;
  padding: 14px;
  transition: width 0.05s ease; /* –Ω–µ–±–æ–ª—å—à–æ–π transition –¥–ª—è –ø–ª–∞–≤–Ω–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–µ—Å–∞–π–∑–µ */
}

/* CENTER PANEL */
.mh-center{
  flex: 1 1 auto;
  min-width: 0; /* –≤–∞–∂–Ω–æ —á—Ç–æ–±—ã —Ü–µ–Ω—Ç—Ä –Ω–æ—Ä–º–∞–ª—å–Ω–æ —É–∂–∏–º–∞–ª—Å—è */
  
  height: 100%;
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(0,0,0,0.26);
  backdrop-filter: blur(18px);
  box-shadow: 0 18px 90px rgba(0,0,0,0.25);
  overflow: hidden;
  display: flex;
  flex-direction: column;
  
  /* ‚úÖ —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–ª–∞—Å—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ü–µ–Ω—Ç—Ä–∞ */
  position: relative;
}

/* RIGHT PANEL */
.mh-right{
  flex: 0 0 380px;   /* ‚Üê –®–ò–†–ï (–±—ã–ª–æ 320px) */
  min-width: 360px;
  
  height: 100%;
  border-radius: 20px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(0,0,0,0.26);
  backdrop-filter: blur(18px);
  box-shadow: 0 18px 90px rgba(0,0,0,0.25);
  overflow: hidden;
  position: relative;
  display: flex;
  flex-direction: column;
}

/* ===== Resizer ===== */
.mh-resizer{
  width: 10px;
  cursor: ew-resize;
  position: relative;
  flex: 0 0 10px;
  background: transparent;
  z-index: 5;
}

.mh-resizer::before{
  content: "";
  position: absolute;
  left: 50%;
  top: 10px;
  bottom: 10px;
  width: 2px;
  transform: translateX(-50%);
  background: rgba(168,85,247,0.20);
  border-radius: 2px;
  box-shadow: 0 0 18px rgba(168,85,247,0.10);
  transition: background 0.2s ease, box-shadow 0.2s ease;
}

.mh-resizer:hover::before{
  background: rgba(168,85,247,0.55);
  box-shadow: 0 0 22px rgba(168,85,247,0.22);
}

/* ===== Collapsed mode (–æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –∞–≤–∞—Ç–∞—Ä–∫–∏ + –±–µ–π–¥–∂–∏) ===== */
.mh-left.collapsed .mh-dialog-meta,
.mh-left.collapsed .mh-dialog-last,
.mh-left.collapsed .mh-dialog-name,
.mh-left.collapsed .mh-left-title,
.mh-left.collapsed .mh-search-meta,
.mh-left.collapsed .mh-search-sub,
.mh-left.collapsed .mh-search-name{
  display: none !important;
}

.mh-left.collapsed .mh-dialog-item{
  justify-content: center;
  padding-left: 4px;
  padding-right: 4px;
  min-height: 48px;
}

.mh-left.collapsed .mh-dialog-content{
  justify-content: center;
  padding: 8px 4px;
}

.mh-left.collapsed .mh-dialog-ava{
  margin: 0 auto;
  width: 36px;
  height: 36px;
  min-width: 36px;
  min-height: 36px;
}

.mh-left.collapsed .mh-search-item{
  justify-content: center;
  padding: 8px 4px;
}

.mh-left.collapsed .mh-search-ava{
  margin: 0 auto;
}

.mh-left.collapsed .mh-unread-badge{
  right: -4px;
  bottom: -4px;
  min-width: 16px;
  height: 16px;
  font-size: 0.5rem;
}

/* ===== –õ–ï–í–ê–Ø –ö–û–õ–û–ù–ö–ê ‚Äî –í–ï–†–¢–ò–ö–ê–õ–¨–ù–´–ô LAYOUT ===== */
/* –í–µ—Ä—Ö (—Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞) */
.mh-left-top{
  flex: 0 0 auto;
}

/* –í—ã–ø–∞–¥–∞—é—â–∏–π –±–ª–æ–∫ –Ω–∞–π–¥–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π */
.mh-search-results{
  margin-top: 10px;
  max-height: 240px;
  overflow: auto;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(20,20,30,0.95);
  backdrop-filter: blur(18px);
  padding: 8px;
}

/* –û–¥–∏–Ω –Ω–∞–π–¥–µ–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å */
.mh-search-item{
  width: 100%;
  display: flex;
  align-items: center;
  gap: 10px;

  padding: 10px 10px;
  border-radius: 14px;
  border: 1px solid transparent;
  background: transparent;
  color: inherit;
  cursor: pointer;
  text-align: left;
}

.mh-search-item:hover:not(:disabled){
  border-color: rgba(160,120,255,0.35);
  background: rgba(255,255,255,0.05);
}

.mh-search-item:disabled{
  opacity: 0.5;
  cursor: not-allowed;
}

.mh-search-ava{
  width: 36px;
  height: 36px;
  border-radius: 14px;
  display: grid;
  place-items: center;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  flex: 0 0 36px;
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.65rem;
  overflow: hidden;
  position: relative;
}

.mh-search-ava img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.mh-search-meta{ 
  min-width: 0; 
  flex: 1; 
}

.mh-search-name{
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.62rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.mh-search-sub{
  margin-top: 4px;
  font-size: 0.8rem;
  opacity: 0.7;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.mh-search-loading{
  padding: 20px;
  text-align: center;
  opacity: 0.7;
  font-size: 0.85rem;
}

.mh-left-title{
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.7rem;
  opacity: 0.9;
  margin: 10px 0;
  padding-left: 4px;
}

/* –°–ø–∏—Å–æ–∫ –¥–∏–∞–ª–æ–≥–æ–≤ –∑–∞–Ω–∏–º–∞–µ—Ç –æ—Å—Ç–∞–≤—à–µ–µ—Å—è –º–µ—Å—Ç–æ */
.mh-left-list{
  flex: 1;
  min-height: 0;
  overflow-y: auto;
  padding-right: 6px;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

/* ===== –ö–û–ú–ü–ê–ö–¢–ù–ê–Ø –ö–ê–†–¢–û–ß–ö–ê –î–ò–ê–õ–û–ì–ê ===== */
.mh-dialog-item{
  position: relative; /* –≤–∞–∂–Ω–æ –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫—Ä–µ—Å—Ç–∏–∫–∞ */
  display: flex;
  align-items: center;

  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.18);
  transition: all 0.12s ease;

  min-height: 56px;
  width: 100%;
  overflow: visible;  /* üî• –ò–ó–ú–ï–ù–ï–ù–û: –±—ã–ª–æ hidden, —Ç–µ–ø–µ—Ä—å visible - —á—Ç–æ–±—ã –±–µ–π–¥–∂ –Ω–µ –æ–±—Ä–µ–∑–∞–ª—Å—è */
}

.mh-dialog-item:hover{
  background: rgba(255,255,255,0.06);
  border-color: rgba(160,120,255,0.35);
}

.mh-dialog-item.active{
  background: rgba(120,80,255,0.18);
  border-color: rgba(160,120,255,0.55);
}

/* –ö–æ–Ω—Ç–µ–Ω—Ç –¥–∏–∞–ª–æ–≥–∞ (–∫–ª–∏–∫–∞–±–µ–ª—å–Ω–∞—è –æ–±–ª–∞—Å—Ç—å) */
.mh-dialog-content{
  flex: 1;
  display: flex;
  align-items: center;
  gap: 12px;
  padding: 10px 12px;
  background: transparent;
  border: none;
  color: inherit;
  cursor: pointer;
  text-align: left;
  min-width: 0;
}

.mh-dialog-content:focus{
  outline: none;
}

.mh-dialog-ava{
  width: 40px;
  height: 40px;
  min-width: 40px;
  min-height: 40px;
  border-radius: 14px;
  display: grid;
  place-items: center;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  overflow: visible;  /* üî• –ò–ó–ú–ï–ù–ï–ù–û: –±—ã–ª–æ hidden, —Ç–µ–ø–µ—Ä—å visible - —á—Ç–æ–±—ã –±–µ–π–¥–∂ –≤—ã–ª–µ–∑–∞–ª */
  position: relative;
  z-index: 2;         /* üî• –î–û–ë–ê–í–õ–ï–ù–û: —á—Ç–æ–±—ã –∞–≤–∞—Ç–∞—Ä–∫–∞ –±—ã–ª–∞ –≤—ã—à–µ —Ñ–æ–Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∏ */
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.7rem;
}

.mh-dialog-ava img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.mh-dialog-meta{
  min-width: 0;
  flex: 1;
}

.mh-dialog-name{
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.62rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.mh-dialog-last{
  margin-top: 4px;
  font-size: 0.8rem;
  opacity: 0.7;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* ===== –ö–†–ï–°–¢–ò–ö –î–õ–Ø –°–ö–†–´–¢–ò–Ø –î–ò–ê–õ–û–ì–ê ===== */
.mh-dialog-close{
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);

  width: 28px;
  height: 28px;
  border-radius: 10px;

  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(0,0,0,0.25);
  color: rgba(255,255,255,0.85);

  display: grid;
  place-items: center;
  cursor: pointer;
  opacity: 0;
  transition: opacity 120ms ease, transform 120ms ease, 
              border-color 120ms ease, background 120ms ease;
  font-size: 16px;
  padding: 0;
  line-height: 1;
  z-index: 2;
  box-shadow: 0 2px 8px rgba(0,0,0,0.2);
}

.mh-dialog-item:hover .mh-dialog-close{
  opacity: 1;
}

.mh-dialog-close:hover{
  transform: translateY(-50%) scale(1.08);
  border-color: rgba(255,80,80,0.55);
  background: rgba(200,60,60,0.25);
  color: rgba(255,120,120,0.95);
}

.mh-dialog-close:active{
  transform: translateY(-50%) scale(0.95);
}

.mh-empty-state{
  padding: 20px;
  text-align: center;
  opacity: 0.7;
  font-size: 0.9rem;
}

/* ===== –ë–õ–û–ö –°–û–û–ë–©–ï–ù–ò–Ø –° –¢–†–ï–ö–û–ú ===== */
.mh-bubble-track{
  margin-top: 8px;
  padding: 8px 10px;
  border-radius: 12px;
  border: 1px solid rgba(132,86,255,0.3);
  background: rgba(132,86,255,0.1);
  font-size: 0.85rem;
  display: flex;
  align-items: center;
  gap: 8px;
}

/* ===== –ß–ê–¢ - –≤–Ω—É—Ç—Ä–∏ mh-center ===== */
.mh-chat-head{
  display: grid;
  grid-template-columns: 46px 1fr;
  gap: 12px;
  align-items: center;
  padding: 14px;
  border-bottom: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.04);
  overflow: visible; /* üî• –î–û–ë–ê–í–õ–ï–ù–û: —á—Ç–æ–±—ã –∫—Ä—É–∂–æ–∫ –Ω–µ –æ–±—Ä–µ–∑–∞–ª—Å—è */
}

.mh-chat-ava{
  width: 42px;
  height: 42px;
  min-width: 42px;
  min-height: 42px;
  border-radius: 14px;
  display: grid;
  place-items: center;
  position: relative; /* üî• –î–û–ë–ê–í–õ–ï–ù–û: –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫—Ä—É–∂–∫–∞ */
  overflow: visible;  /* üî• –ò–ó–ú–ï–ù–ï–ù–û: –±—ã–ª–æ hidden, —Ç–µ–ø–µ—Ä—å visible - —á—Ç–æ–±—ã –∫—Ä—É–∂–æ–∫ –Ω–µ –æ–±—Ä–µ–∑–∞–ª—Å—è */

  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.08);

  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.75rem;
}

.mh-chat-ava img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.mh-chat-name{
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.7rem;
}

.mh-chat-info{
  min-width: 0;
}

/* –ø–µ—Ä–µ–ø–∏—Å–∫–∞ –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—ë –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ */
.mh-chat-body{
  flex: 1;
  height: auto;
  min-height: 0;
  overflow: auto;
  padding: 14px;
}

.mh-chat-placeholder{
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  opacity: 0.7;
  text-align: center;
  gap: 8px;
}

.mh-chat-subtitle{
  font-size: 0.85rem;
  opacity: 0.5;
}

.mh-bubble-row{
  display: flex;
  align-items: flex-end;
  gap: 10px;
  margin-bottom: 10px;
}

.mh-bubble-row.me{ justify-content: flex-end; }
.mh-bubble-row.them{ justify-content: flex-start; }

.mh-bubble{
  max-width: min(640px, 90%);
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.12);
  padding: 10px 12px;
  background: rgba(255,255,255,0.06);
  position: relative;
}

.mh-bubble.me{
  background: rgba(132,86,255,0.16);
  border-color: rgba(132,86,255,0.35);
}

.mh-bubble-text{
  font-size: 0.95rem;
  line-height: 1.35;
  word-break: break-word;
}

/* ===== –ù–û–í–´–ô –ë–õ–û–ö –î–õ–Ø –ú–ï–¢–ê-–ò–ù–§–û–†–ú–ê–¶–ò–ò (–í–†–ï–ú–Ø + –°–¢–ê–¢–£–°) ===== */
.mh-bubble-meta{
  display: flex;
  align-items: center;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 6px;
  font-size: 0.75rem;
}

.mh-bubble-time{
  opacity: 0.6;
}

/* ===== –°–¢–ò–õ–ò –î–õ–Ø –°–¢–ê–¢–£–°–û–í –°–û–û–ë–©–ï–ù–ò–ô ===== */
.mh-bubble-status{
  font-family: 'Press Start 2P', monospace;
  font-size: 0.7rem;
  letter-spacing: -2px;
  display: inline-block;
  line-height: 1;
  transition: all 0.2s ease;
}

/* üî• –°–¢–ê–¢–£–°: –û–¢–ü–†–ê–í–õ–Ø–ï–¢–°–Ø */
.mh-bubble-status.sending{
  opacity: 0.5;
  animation: pulse 1.5s infinite ease-in-out;
}

/* üî• –°–¢–ê–¢–£–°: –î–û–°–¢–ê–í–õ–ï–ù–û */
.mh-bubble-status.delivered{
  opacity: 0.8;
}

/* üî• –°–¢–ê–¢–£–°: –ü–†–û–ß–ò–¢–ê–ù–û */
.mh-bubble-status.read{
  opacity: 0.95;
  color: #b388ff; /* —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –æ—Ç—Ç–µ–Ω–æ–∫ */
  text-shadow: 0 0 8px rgba(179, 136, 255, 0.6);
}

/* üî• –°–¢–ê–¢–£–°: –û–®–ò–ë–ö–ê */
.mh-bubble-status.error{
  opacity: 0.9;
  color: #ff6b6b; /* –∫—Ä–∞—Å–Ω–æ–≤–∞—Ç—ã–π –¥–ª—è –æ—à–∏–±–∫–∏ */
  text-shadow: 0 0 8px rgba(255, 107, 107, 0.5);
}

/* –ê–Ω–∏–º–∞—Ü–∏—è –ø—É–ª—å—Å–∞—Ü–∏–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–∞ "–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è" */
@keyframes pulse {
  0% {
    opacity: 0.5;
    transform: scale(1);
  }
  50% {
    opacity: 1;
    transform: scale(1.1);
  }
  100% {
    opacity: 0.5;
    transform: scale(1);
  }
}

/* –∏–Ω–ø—É—Ç –≤—Å–µ–≥–¥–∞ –≤–Ω–∏–∑—É */
.mh-chat-input{
  display: flex;
  gap: 10px;
  align-items: center;
  padding: 14px;
  border-top: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.04);
  margin-top: auto;
}

.mh-input{
  flex: 1;
  height: 44px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.08);
  color: #fff;
  outline: none;
  padding: 0 14px;
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.62rem;
}

.mh-input:focus{
  border-color: rgba(132,86,255,0.6);
  box-shadow: 0 0 0 3px rgba(132,86,255,0.18);
}

.mh-input:disabled{
  opacity: 0.5;
  cursor: not-allowed;
}

/* ===== –ù–û–í–ê–Ø –ö–ù–û–ü–ö–ê-–°–ê–ú–û–õ–ï–¢–ò–ö ===== */
.send-button {
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 6px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: opacity 0.2s ease;
  flex-shrink: 0; /* ‚Üê —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –Ω–µ —Å–∂–∏–º–∞–ª–∞—Å—å */
}

.send-button:disabled {
  opacity: 0.3;
  cursor: not-allowed;
  pointer-events: none;
}

.send-icon {
  width: 22px;
  height: 22px;
  color: #aaa;
  transition: color 0.2s ease, transform 0.15s ease;
}

.send-button:hover:not(:disabled) .send-icon {
  color: #a855f7; /* —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
  transform: scale(1.1);
}

.send-button:active:not(:disabled) .send-icon {
  transform: scale(0.95);
}

/* –°—Ç–∞—Ä—ã–µ —Å—Ç–∏–ª–∏ mh-send –æ—Å—Ç–∞–≤–ª—è–µ–º –¥–ª—è –æ–±—Ä–∞—Ç–Ω–æ–π —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏, 
   –Ω–æ –æ–Ω–∏ –±–æ–ª—å—à–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è */
.mh-send{
  height: 44px;
  padding: 0 16px;
  border-radius: 14px;
  border: 1px solid rgba(132,86,255,0.55);
  background: rgba(132,86,255,0.18);
  color: #fff;
  cursor: pointer;
  transition: transform .12s ease, background .12s ease;
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.62rem;
}

.mh-send:hover:not(:disabled){
  transform: translateY(-2px);
  background: rgba(132,86,255,0.26);
}

.mh-send:disabled{
  opacity: 0.5;
  cursor: not-allowed;
}

/* ===== Presence status dots ===== */
.mh-presence{
  position: absolute;
  right: -3px;
  bottom: -3px;
  width: 10px;
  height: 10px;
  border-radius: 50%;
  border: 2px solid rgba(0,0,0,0.45);
  background: rgba(255,255,255,0.25);
}

/* üî• –ò–°–ü–†–ê–í–õ–ï–ù–û: –±–æ–ª—å—à–æ–π –∫—Ä—É–∂–æ–∫ –¥–ª—è —à–∞–ø–∫–∏ –∏ –ø—Ä–∞–≤–æ–π –ø–∞–Ω–µ–ª–∏ */
.mh-presence.big{
  position: absolute;
  right: -4px;
  bottom: -4px;
  width: 14px;
  height: 14px;
  border-radius: 50%;
  border: 2px solid #0b0b12; /* —Ü–≤–µ—Ç —Ñ–æ–Ω–∞ —à–∞–ø–∫–∏ */
  z-index: 10;
}

.mh-presence.online{ background: #39ff88; }
.mh-presence.afk{ background: #ffd34a; }

/* offline: "–ø—Ä–∏–∑—Ä–∞—á–Ω—ã–π –ø—Ä–æ–∫–æ–ª–æ—Ç—ã–π —Å–µ—Ä—ã–π" */
.mh-presence.offline{
  background: rgba(255,255,255,0.18);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,0.25);
}
.mh-presence.offline::after{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: 50%;
  background: linear-gradient(135deg, transparent 45%, rgba(255,255,255,0.55) 46%, rgba(255,255,255,0.55) 54%, transparent 55%);
  opacity: 0.55;
}

.mh-presence-label{
  font-size: 0.8rem;
  opacity: 0.75;
}
.mh-presence-label.online{ opacity: 0.95; }
.mh-presence-label.afk{ opacity: 0.95; }

/* ===== Profile right panel ===== */
.mh-profile-head{
  display: grid;
  grid-template-columns: 56px 1fr;
  gap: 12px;
  align-items: center;
  padding: 14px;
  border-bottom: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.04);
  overflow: visible; /* üî• –î–û–ë–ê–í–õ–ï–ù–û: —á—Ç–æ–±—ã –∫—Ä—É–∂–æ–∫ –Ω–µ –æ–±—Ä–µ–∑–∞–ª—Å—è */
}

.mh-profile-ava{
  width: 54px;
  height: 54px;
  min-width: 54px;
  min-height: 54px;
  border-radius: 18px;
  display: grid;
  place-items: center;
  position: relative; /* üî• –î–û–ë–ê–í–õ–ï–ù–û: –¥–ª—è –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –∫—Ä—É–∂–∫–∞ */
  overflow: visible;  /* üî• –ò–ó–ú–ï–ù–ï–ù–û: –±—ã–ª–æ hidden, —Ç–µ–ø–µ—Ä—å visible - —á—Ç–æ–±—ã –∫—Ä—É–∂–æ–∫ –Ω–µ –æ–±—Ä–µ–∑–∞–ª—Å—è */

  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.08);

  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.8rem;
}

.mh-profile-ava img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.mh-profile-name{
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.72rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.mh-profile-block{
  padding: 14px;
  border-bottom: 1px solid rgba(255,255,255,0.10);
}

/* –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ –ø–æ—Å–ª–µ–¥–Ω–∏–π –±–ª–æ–∫ –Ω–µ –∏–º–µ–µ—Ç –Ω–∏–∂–Ω–µ–π –≥—Ä–∞–Ω–∏—Ü—ã */
.mh-profile-block:last-child {
  border-bottom: none;
}

.mh-profile-title{
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.62rem;
  opacity: 0.85;
  margin-bottom: 10px;
}

.mh-profile-bio{
  font-size: 0.9rem;
  line-height: 1.35;
  opacity: 0.8;
  word-break: break-word;
}

/* ===== Track card (sidebar-like) ===== */
.mh-track-card{
  display: flex;
  align-items: center;
  gap: 14px;
  padding: 14px;
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  width: 100%;                /* ‚Üê –∑–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é —à–∏—Ä–∏–Ω—É */
  overflow: hidden;           /* ‚Üê —á—Ç–æ–±—ã –Ω–∏—á–µ–≥–æ –Ω–µ –≤—ã–ª–µ–∑–∞–ª–æ */
}

.mh-track-cover{
  width: 72px;
  height: 72px;
  min-width: 72px;
  min-height: 72px;
  border-radius: 18px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.16);
  background: rgba(0,0,0,0.25);
  flex-shrink: 0;              /* ‚Üê —á—Ç–æ–±—ã –æ–±–ª–æ–∂–∫–∞ –Ω–µ —Å–∂–∏–º–∞–ª–∞—Å—å */
  position: relative;
}

.mh-track-cover img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.mh-track-cover-fallback{
  width: 100%;
  height: 100%;
  border-radius: inherit;
  background: radial-gradient(circle at 30% 30%, rgba(132,86,255,0.45), rgba(0,0,0,0.2));
}

.mh-track-info{
  flex: 1;
  min-width: 0;                /* ‚Üê –≤–∞–∂–Ω–æ –¥–ª—è –ø–µ—Ä–µ–Ω–æ—Å–∞ —Ç–µ–∫—Å—Ç–∞ */
  overflow: hidden;            /* ‚Üê —á—Ç–æ–±—ã —Ç–µ–∫—Å—Ç –Ω–µ –≤—ã–ª–µ–∑–∞–ª */
}

.mh-track-title{
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.62rem;
  white-space: normal;         /* ‚Üê –¢–ï–ö–°–¢ –ü–ï–†–ï–ù–û–°–ò–¢–°–Ø (–±—ã–ª–æ nowrap) */
  word-break: break-word;      /* ‚Üê —Ä–∞–∑—Ä—ã–≤–∞–µ–º –¥–ª–∏–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ */
  line-height: 1.4;            /* ‚Üê –Ω–µ–º–Ω–æ–≥–æ –±–æ–ª—å—à–µ –º–µ–∂—Å—Ç—Ä–æ—á–Ω—ã–π */
  margin-bottom: 4px;          /* ‚Üê –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É */
}

.mh-track-artist{
  margin-top: 6px;
  opacity: 0.7;
  font-size: 0.85rem;
  white-space: normal;         /* ‚Üê –¢–ï–ö–°–¢ –ü–ï–†–ï–ù–û–°–ò–¢–°–Ø (–±—ã–ª–æ nowrap) */
  word-break: break-word;      /* ‚Üê —Ä–∞–∑—Ä—ã–≤–∞–µ–º –¥–ª–∏–Ω–Ω—ã–µ —Å–ª–æ–≤–∞ */
  line-height: 1.4;
}

.mh-track-row{
  margin-top: 10px;
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
  flex-wrap: wrap;             /* ‚Üê —á—Ç–æ–±—ã –ø–µ—Ä–µ–Ω–æ—Å–∏–ª–æ—Å—å –Ω–∞ –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö */
}

.mh-track-pill{
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(132,86,255,0.12);
  font-size: 0.78rem;
  opacity: 0.9;
  white-space: nowrap;         /* ‚Üê —Ç–µ–∫—Å—Ç –∫–Ω–æ–ø–∫–∏ –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–º */
  flex-shrink: 0;              /* ‚Üê –∫–Ω–æ–ø–∫–∞ –Ω–µ —Å–∂–∏–º–∞–µ—Ç—Å—è */
}

.mh-track-time{
  font-size: 0.78rem;
  opacity: 0.65;
  white-space: nowrap;         /* ‚Üê –≤—Ä–µ–º—è —Ç–æ–∂–µ –Ω–µ –ø–µ—Ä–µ–Ω–æ—Å–∏–º */
  flex-shrink: 0;              /* ‚Üê –Ω–µ —Å–∂–∏–º–∞–µ—Ç—Å—è */
}

/* ===== –ö–õ–ò–ö–ê–ë–ï–õ–¨–ù–´–ï –°–°–´–õ–ö–ò –í MESSAGEHUB (TRACK TITLE / ARTIST) ===== */
/* üî• –ù–û–í–´–ï –°–¢–ò–õ–ò –î–õ–Ø –ö–õ–ò–ö–ê–ë–ï–õ–¨–ù–´–• –≠–õ–ï–ú–ï–ù–¢–û–í */
.mh-link{
  cursor: pointer;
  transition: color 0.18s ease, opacity 0.18s ease;
  display: inline-block;
}

.mh-link:hover{
  color: #a855f7; /* —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
}

.mh-link.is-disabled{
  cursor: default;
  opacity: 0.7;
}

.mh-link.is-disabled:hover{
  color: inherit; /* –Ω–µ –º–µ–Ω—è–µ–º —Ü–≤–µ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏, –µ—Å–ª–∏ —Å—Å—ã–ª–∫–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ */
}

/* ===== –ö–õ–ò–ö–ê–ë–ï–õ–¨–ù–´–ï –ù–ò–ö–ò –° –§–ò–û–õ–ï–¢–û–í–´–ú HOVER ===== */
.mh-username-link {
  cursor: pointer;
  transition: color 0.12s ease, text-shadow 0.12s ease;
  display: inline-block;
}

.mh-username-link:hover {
  color: rgba(170, 120, 255, 0.95) !important;
  text-shadow: 0 0 12px rgba(170, 120, 255, 0.35);
}

/* –£–±–µ–∂–¥–∞–µ–º—Å—è, —á—Ç–æ —Å—Å—ã–ª–∫–∏ –Ω–µ –ª–æ–º–∞—é—Ç layout */
.mh-dialog-name.mh-username-link {
  display: inline-block;
  width: auto;
}

.mh-chat-name.mh-username-link {
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.7rem;
  display: inline-block;
}

.mh-profile-name .mh-username-link {
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.72rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

/* ===== Unread badge (—Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π –∫—Ä—É–∂–æ–∫ —Å —á–∏—Å–ª–æ–º) ===== */
.mh-unread-badge{
  position: absolute;
  right: -6px;
  bottom: -6px;          /* ‚úÖ –ü–ï–†–ï–ú–ï–©–ï–ù–û –í–ù–ò–ó */
  min-width: 18px;
  height: 18px;
  padding: 0 5px;
  border-radius: 999px;
  background: #a855f7;
  color: #fff;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.55rem;
  line-height: 1;
  box-shadow: 0 6px 18px rgba(0,0,0,0.35);
  border: 1px solid rgba(255,255,255,0.28);
  pointer-events: none; /* —á—Ç–æ–±—ã –∫–ª–∏–∫–∏ –ø–æ –¥–∏–∞–ª–æ–≥—É –Ω–µ –ª–æ–º–∞–ª–∏—Å—å */
  z-index: 10;           /* ‚úÖ –ü–û–í–ï–†–• –í–°–ï–ì–û –í–ù–£–¢–†–ò –ö–ê–†–¢–û–ß–ö–ò */
  font-weight: bold;
  letter-spacing: 0.5px;
}

/* ===== –ê–≤–∞—Ç–∞—Ä–∫–∞ —Ä—è–¥–æ–º —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏ (–º–∞–ª–µ–Ω—å–∫–∞—è, –∫—Ä—É–≥–ª–∞—è, —Ñ–∏–æ–ª–µ—Ç–æ–≤–∞—è –æ–±–≤–æ–¥–∫–∞) ===== */
.mh-msg-ava{
  width: 26px;
  height: 26px;
  min-width: 26px;
  min-height: 26px;
  max-width: 26px;
  max-height: 26px;

  border-radius: 50%;
  overflow: hidden;

  flex: 0 0 26px;      /* ‚úÖ –Ω–µ —Ä–∞—Å—Ç—è–≥–∏–≤–∞—Ç—å—Å—è */
  align-self: flex-end; /* ‚úÖ –Ω–µ —Ç—è–Ω—É—Ç—å—Å—è –ø–æ –≤—ã—Å–æ—Ç–µ —Ä—è–¥–∞ */

  display: flex;
  align-items: center;
  justify-content: center;

  background: rgba(255,255,255,0.06);
  border: 2px solid rgba(168,85,247,0.85); /* ‚úÖ —Ñ–∏–æ–ª–µ—Ç–æ–≤–∞—è –æ–±–≤–æ–¥–∫–∞ */
  box-shadow: 0 10px 24px rgba(168,85,247,0.12);
  box-sizing: border-box;
}

.mh-msg-ava img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.mh-msg-ava span{
  font-family: 'Press Start 2P', monospace;
  font-size: 0.65rem;
  line-height: 1;
  opacity: 0.95;
}

/* —á—É—Ç—å –Ω–∏–∂–µ –¥–ª—è —Ç–≤–æ–µ–π —Å—Ç–æ—Ä–æ–Ω—ã, —á—Ç–æ–±—ã –≤—ã–≥–ª—è–¥–µ–ª–æ –∫–∞–∫ ‚Äú—Ç–≤–æ–π —É–≥–æ–ª‚Äù */
.mh-msg-ava.me{
  border-color: rgba(168,85,247,0.95);
  box-shadow: 0 10px 24px rgba(168,85,247,0.25);
}

/* –ê–¥–∞–ø—Ç–∏–≤: –Ω–∞ —É–∑–∫–∏—Ö —ç–∫—Ä–∞–Ω–∞—Ö –ø—Ä—è—á–µ–º –ø—Ä–æ—Ñ–∏–ª—å */
@media (max-width: 1180px){
  .mh-layout{ 
    grid-template-columns: 340px 1fr; 
  }
  .mh-right{ display: none; }
}

@media (max-width: 980px){
  .mh-layout{ grid-template-columns: 1fr; }
  .mh-resizer{ display: none; }
  .mh-left{ display: none; }
}

/* ===== VOICE MIC BUTTON (Telegram-like) ===== */
.mh-voice-btn{
  width: 46px;
  height: 46px;
  border-radius: 50%;
  position: relative;
  flex-shrink: 0;

  display: inline-flex;
  align-items: center;
  justify-content: center;

  cursor: pointer;
  user-select: none;

  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.08); /* ‚úÖ —Å–µ—Ä—ã–π glass */
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);

  box-shadow:
    0 10px 30px rgba(0,0,0,0.18),
    inset 0 1px 0 rgba(255,255,255,0.10);

  transition:
    background 180ms ease,
    border-color 180ms ease,
    box-shadow 180ms ease,
    transform 80ms linear;

  /* –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –±–µ–∑ –ø—É–ª—å—Å–∞ */
  transform: translateZ(0) scale(1);
}

/* SVG */
.mh-voice-svg{
  width: 18px;
  height: 18px;
  fill: rgba(255,255,255,0.78);
  transition: fill 180ms ease, filter 180ms ease, transform 180ms ease;
}

/* –í–ù–ï–®–ù–ï–ï –ö–û–õ–¨–¶–û (–∞—É—Ä–∞) ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç–æ */
.mh-voice-btn::after{
  content: "";
  position: absolute;
  inset: -10px;
  border-radius: 50%;
  pointer-events: none;
  opacity: 0;
  transform: scale(0.9);
  filter: blur(0px);
  border: 1px solid rgba(168,85,247,0.0);
}

/* –í–ù–£–¢–†–ï–ù–ù–ï–ï –°–í–ï–ß–ï–ù–ò–ï ‚Äî –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é —Å–∫—Ä—ã—Ç–æ */
.mh-voice-btn::before{
  content: "";
  position: absolute;
  inset: -2px;
  border-radius: 50%;
  pointer-events: none;
  opacity: 0;
  background: radial-gradient(
    circle at 50% 50%,
    rgba(168,85,247,0.45),
    rgba(168,85,247,0.0) 65%
  );
  filter: blur(10px);
}

/* Hover (–∫—Ä–∞—Å–∏–≤–æ) */
.mh-voice-btn:hover{
  border-color: rgba(255,255,255,0.20);
  background: rgba(255,255,255,0.10);
}

/* Disabled */
.mh-voice-btn:disabled{
  opacity: 0.45;
  cursor: not-allowed;
  transform: scale(1);
}

/* ===== ATTACH BUTTON (–ø–ª—é—Å–∏–∫ —Ä—è–¥–æ–º —Å –º–∏–∫—Ä–æ—Ñ–æ–Ω–æ–º) ===== */
.mh-voice-wrap{
  position: relative;
  display: flex;
  align-items: center;
  gap: 10px;
}

.mh-attach-btn{
  width: 22px;
  height: 22px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(120,120,120,0.22);
  color: rgba(255,255,255,0.85);
  display:flex;
  align-items:center;
  justify-content:center;
  font-size: 16px;
  line-height: 1;
  cursor: pointer;
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
  flex-shrink: 0;
}

.mh-attach-btn:hover{
  transform: scale(1.06);
  border-color: rgba(180,120,255,0.35);
}

.mh-attach-btn:disabled{
  opacity: .45;
  cursor: not-allowed;
  transform: none;
}

/* ===== ATTACH MODAL (—Å—Ç–µ–∫–ª—è–Ω–Ω—ã–π –ø—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä) ===== */
.mh-attach-modal{
  position: fixed;
  inset: 0;
  z-index: 9999;
  display: grid;
  place-items: center;
}

.mh-attach-backdrop{
  position: absolute;
  inset: 0;
  background: rgba(0,0,0,0.55);
  backdrop-filter: blur(10px);
}

.mh-attach-card{
  position: relative;
  width: min(560px, calc(100vw - 32px));
  border-radius: 18px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(30, 30, 40, 0.55);
  box-shadow: 0 18px 80px rgba(0,0,0,0.6);
  overflow: hidden;
  backdrop-filter: blur(14px);
}

.mh-attach-preview{
  width: 100%;
  max-height: 420px;
  display: grid;
  place-items: center;
  background: rgba(0,0,0,0.25);
}

.mh-attach-preview img{
  width: 100%;
  height: auto;
  display: block;
  object-fit: contain;
}

.mh-attach-preview video{
  width: 100%;
  max-height: 420px;
  display: block;
  object-fit: contain;
}

.mh-attach-bottom{
  padding: 12px;
  display: grid;
  gap: 10px;
}

.mh-attach-caption{
  width: 100%;
  height: 42px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.06);
  padding: 0 12px;
  color: rgba(255,255,255,0.9);
  outline: none;
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.62rem;
}

.mh-attach-caption:focus{
  border-color: rgba(132,86,255,0.6);
  box-shadow: 0 0 0 3px rgba(132,86,255,0.18);
}

.mh-attach-actions{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.mh-attach-cancel{
  height: 38px;
  padding: 0 14px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.06);
  color: rgba(255,255,255,0.86);
  cursor: pointer;
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.62rem;
  transition: all 0.12s ease;
}

.mh-attach-cancel:hover{
  border-color: rgba(255,80,80,0.55);
  background: rgba(200,60,60,0.15);
}

.mh-attach-send{
  width: 44px;
  height: 44px;
  border-radius: 14px;
  border: 1px solid rgba(170, 120, 255, 0.35);
  background: rgba(130, 70, 255, 0.25);
  color: rgba(255,255,255,0.95);
  display: grid;
  place-items: center;
  cursor: pointer;
  transition: transform .15s ease, filter .15s ease;
}

.mh-attach-send:hover:not(:disabled){
  transform: translateY(-1px);
  filter: brightness(1.1);
}

.mh-attach-send:disabled{
  opacity: 0.5;
  cursor: not-allowed;
}

.mh-attach-send svg{
  width: 22px;
  height: 22px;
}

/* ===== MEDIA INSIDE BUBBLES (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –≤–∏–¥–µ–æ) ===== */
.mh-media{
  display: grid;
  gap: 8px;
}

.mh-media-img{
  width: 320px;
  max-width: 100%;
  border-radius: 14px;
  display: block;
  border: 1px solid rgba(255,255,255,0.12);
}

.mh-media-video{
  width: 340px;
  max-width: 100%;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(0,0,0,0.25);
}

.mh-media-caption{
  color: rgba(255,255,255,0.85);
  font-size: 13px;
  line-height: 1.2;
  padding: 0 4px;
}

/* ===== VOICE MESSAGE BUBBLE ===== */
.mh-voice{
  display: flex;
  align-items: center;
  gap: 10px;
  min-width: 220px;
}

.mh-voice-play{
  width: 34px;
  height: 34px;
  border-radius: 50%;
  border: 1px solid rgba(255,255,255,0.22);
  background: rgba(0,0,0,0.18);
  color: #fff;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 13px;
  line-height: 1;
  transition: transform 0.12s ease, border-color 0.12s ease;
}

.mh-voice-play:hover{
  transform: scale(1.06);
  border-color: rgba(168,85,247,0.7);
}

.mh-voice-wave{
  flex: 1;
  height: 28px;
  display: flex;
  align-items: center;
  gap: 2px;
}

.mh-voice-bar{
  width: 3px;
  border-radius: 8px;
  background: rgba(255,255,255,0.18);
  transition: background 0.12s ease;
}

.mh-voice-bar.filled{
  background: rgba(168,85,247,0.95);
  box-shadow: 0 0 12px rgba(168,85,247,0.22);
}

.mh-voice-time{
  min-width: 46px;
  text-align: right;
  font-size: 0.60rem;
  opacity: 0.85;
}

/* ===== EMOJI BUTTON (—Ä—è–¥–æ–º —Å —Å–∞–º–æ–ª–µ—Ç–∏–∫–æ–º) ===== */
.mh-emoji-btn{
  width: 44px;
  height: 44px;
  border-radius: 14px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: rgba(255,255,255,0.92);
  display: grid;
  place-items: center;
  cursor: pointer;
  transition: transform .15s ease, border-color .15s ease, filter .15s ease;
  font-size: 20px;
  flex-shrink: 0;
}

.mh-emoji-btn:hover{
  transform: translateY(-1px);
  border-color: rgba(170,120,255,0.35);
  filter: brightness(1.05);
}

.mh-emoji-btn:disabled{
  opacity: .45;
  cursor: not-allowed;
  transform: none;
}

/* ===== RIGHT EMOJI PANEL ===== */
.mh-emoji-panel{
  height: 100%;
  display: grid;
  grid-template-rows: auto 1fr;
  gap: 10px;
  padding: 12px;
  overflow: hidden;
}

.mh-emoji-head{
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 10px;
}

.mh-emoji-back{
  height: 34px;
  padding: 0 12px;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  color: rgba(255,255,255,0.9);
  cursor: pointer;
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.55rem;
  transition: all 0.12s ease;
}

.mh-emoji-back:hover{
  border-color: rgba(170,120,255,0.35);
  background: rgba(170,120,255,0.1);
}

.mh-emoji-title{
  font-weight: 700;
  letter-spacing: .08em;
  opacity: .85;
  font-family: 'Press Start 2P', sans-serif;
  font-size: 0.62rem;
}

/* ===== EMOJI PICKER STYLES ===== */
.mh-emoji-picker-wrap {
  flex: 1;
  overflow: hidden;
  border-radius: 16px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(255,255,255,0.06);
  backdrop-filter: blur(14px);
  padding: 10px;
}

/* emoji-picker-react customization */
.mh-emoji-picker-wrap .EmojiPickerReact {
  width: 100% !important;
  height: calc(100vh - 260px) !important;
  background: transparent !important;
  border: none !important;
  --epr-emoji-size: 24px;
  --epr-category-label-height: 30px;
  --epr-category-navigation-height: 40px;
  --epr-search-border-color: rgba(255,255,255,0.1);
  --epr-category-label-bg-color: rgba(20,20,20,0.8);
  --epr-hover-bg-color: rgba(255,255,255,0.1);
  --epr-highlight-color: #8b5cf6;
  --epr-category-icon-color: rgba(255,255,255,0.5);
  --epr-search-input-bg-color: rgba(255,255,255,0.05);
  --epr-search-input-text-color: #fff;
  --epr-search-input-placeholder-color: rgba(255,255,255,0.3);
}

.mh-emoji-picker-wrap .EmojiPickerReact .epr-body {
  background: transparent;
}

.mh-emoji-picker-wrap .EmojiPickerReact .epr-emoji-category-label {
  background: rgba(30,30,30,0.8);
  backdrop-filter: blur(4px);
  color: rgba(255,255,255,0.7);
  font-size: 12px;
  font-weight: 500;
}

.mh-emoji-picker-wrap .EmojiPickerReact .epr-search {
  background: rgba(0,0,0,0.3);
  border: 1px solid rgba(255,255,255,0.1);
  color: white;
  font-size: 13px;
}

.mh-emoji-picker-wrap .EmojiPickerReact .epr-search::placeholder {
  color: rgba(255,255,255,0.3);
}

.mh-emoji-picker-wrap .EmojiPickerReact .epr-emoji:hover {
  background: rgba(255,255,255,0.1);
  border-radius: 8px;
}

.mh-emoji-picker-wrap .EmojiPickerReact .epr-emoji-img {
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
}

.mh-emoji-picker-wrap .EmojiPickerReact .epr-category-nav {
  background: transparent;
}

.mh-emoji-picker-wrap .EmojiPickerReact .epr-category-nav button {
  filter: brightness(0.8);
  transition: filter 0.2s ease;
}

.mh-emoji-picker-wrap .EmojiPickerReact .epr-category-nav button:hover {
  filter: brightness(1.2);
}

.mh-emoji-picker-wrap .EmojiPickerReact .epr-category-nav button.epr-active {
  filter: brightness(1.5);
}

.mh-emoji-picker-wrap .EmojiPickerReact .epr-skin-tones {
  background: rgba(30,30,30,0.8);
  border: 1px solid rgba(255,255,255,0.1);
}

/* ===== MESSAGE REACTIONS UNDER BUBBLE ===== */
.mh-reactions{
  margin-top: 8px;
  display: flex;
  flex-wrap: wrap;
  gap: 6px;
}

.mh-react-pill{
  display: inline-flex;
  align-items: center;
  gap: 6px;
  height: 26px;
  padding: 0 10px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.12);
  background: rgba(255,255,255,0.06);
  color: rgba(255,255,255,0.92);
  cursor: pointer;
  transition: transform .12s ease, border-color .12s ease, background .12s ease;
}

.mh-react-pill:hover{
  transform: scale(1.04);
  border-color: rgba(170,120,255,0.35);
  background: rgba(170,120,255,0.1);
}

.mh-react-emo{
  font-size: 14px;
  line-height: 1;
}

.mh-react-count{
  font-size: 11px;
  opacity: .8;
  font-family: 'Press Start 2P', sans-serif;
  letter-spacing: -0.5px;
}

/* ===== –ê–í–ê–¢–ê–†–ö–ò –í –†–ï–ê–ö–¶–ò–Ø–• (–ù–û–í–´–ï –°–¢–ò–õ–ò) ===== */
.mh-react-avatars{
  display: inline-flex;
  align-items: center;
  margin-right: 6px;
}

.mh-react-ava{
  width: 18px;
  height: 18px;
  border-radius: 999px;
  overflow: hidden;
  border: 1px solid rgba(255,255,255,0.18);
  background: rgba(255,255,255,0.08);
  margin-left: -6px;  /* –∫—Ä–∞—Å–∏–≤–æ ‚Äú—Å—Ç–µ–∫–æ–º‚Äù */
  box-shadow: 0 6px 18px rgba(0,0,0,0.25);
  transition: transform 0.12s ease;
}

.mh-react-ava:first-child{ 
  margin-left: 0; 
}

.mh-react-pill:hover .mh-react-ava {
  transform: translateY(-1px);
  border-color: rgba(170,120,255,0.5);
}

.mh-react-ava img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display: block;
}

.mh-react-ava-fallback{
  width: 100%;
  height: 100%;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  display: block;
}

.mh-react-more{
  font-size: 11px;
  opacity: .8;
  margin-left: 6px;
  font-weight: 500;
}

/* ===== RIGHT CLICK MENU WITH QUICK REACTS AND DELETE (–ù–û–í–´–ï –°–¢–ò–õ–ò) ===== */
.mh-msgmenu{
  position: fixed;
  z-index: 9999;
  min-width: 220px;
  padding: 10px;
  border-radius: 14px;
  background: rgba(20, 20, 30, 0.78);
  border: 1px solid rgba(255,255,255,0.10);
  backdrop-filter: blur(16px);
  box-shadow: 0 12px 34px rgba(0,0,0,0.45);
}

.mh-msgmenu-reactrow{
  display: flex;
  gap: 6px;
  align-items: center;
  padding: 4px 2px 10px 2px;
  border-bottom: 1px solid rgba(255,255,255,0.08);
  margin-bottom: 8px;
}

.mh-msgmenu-react{
  width: 34px;
  height: 34px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.06);
  display: grid;
  place-items: center;
  cursor: pointer;
  font-size: 18px;
  transition: transform .12s ease, border-color .12s ease, background .12s ease;
}

.mh-msgmenu-react.more{
  font-size: 18px;
  color: rgba(255,255,255,0.9);
}

.mh-msgmenu-react:hover{
  border-color: rgba(170, 80, 255, 0.45);
  box-shadow: 0 0 0 2px rgba(170, 80, 255, 0.12);
  transform: scale(1.05);
}

.mh-msgmenu-item{
  width: 100%;
  text-align: left;
  padding: 10px 10px;
  border-radius: 12px;
  border: 0;
  background: transparent;
  color: rgba(255,255,255,0.92);
  cursor: pointer;
  transition: .15s ease;
}

.mh-msgmenu-item:hover{
  background: rgba(255,255,255,0.06);
}

.mh-msgmenu-item.danger{
  color: rgba(255,110,110,0.95);
}

.mh-msgmenu-item.danger:hover{
  background: rgba(255, 60, 120, 0.12);
  border: 1px solid rgba(255, 60, 120, 0.18);
}

/* ===== FIXES ===== */

/* ‚úÖ FIX 1: pill —Ñ–∏–∫—Å - –∏–∫–æ–Ω–∫–∞ –±–æ–ª—å—à–µ –ù–ï "–ø—Ä–æ–≤–∏—Å–∞–µ—Ç" */
.mh-track-pill{
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  gap: 8px;

  height: 26px;
  padding: 0 12px;

  line-height: 1 !important;
}

.mh-track-pill-ico{
  display: inline-flex;
  align-items: center;
  justify-content: center;

  width: 14px;              /* —Ñ–∏–∫—Å —à–∏—Ä–∏–Ω—ã –ø–æ–¥ –∏–∫–æ–Ω–∫—É */
  height: 14px;             /* —Ñ–∏–∫—Å –≤—ã—Å–æ—Ç—ã */
  line-height: 1;

  position: relative;
  top: -3px;                 /* ‚úÖ –æ–ø—É—Å–∫–∞–µ–º –≤–Ω–∏–∑ (–±—ã–ª–æ -1px) */
  font-size: 13px;
}

.mh-track-pill-text{
  line-height: 1;
}

/* ===== ALWAYS PULSE WHILE RECORDING (TG-like) ===== */
.mh-voice-btn.recording{
  background: rgba(168,85,247,0.30) !important;
  border-color: rgba(168,85,247,0.95) !important;

  /* ‚úÖ –≤—Å–µ–≥–¥–∞ –ø—É–ª—å—Å–∏—Ä—É–µ—Ç */
  animation: mhMicPulse 900ms ease-in-out infinite;

  /* ‚úÖ + –¥–æ–ø. —É–≤–µ–ª–∏—á–µ–Ω–∏–µ –æ—Ç –≥—Ä–æ–º–∫–æ—Å—Ç–∏ */
  transform: translateZ(0) scale(calc(1.04 + (var(--mic-level, 0) * 0.40))) !important;

  box-shadow:
    0 0 calc(16px + (var(--mic-level, 0) * 46px)) rgba(168,85,247,0.55),
    0 12px 42px rgba(168,85,247,0.22),
    inset 0 1px 0 rgba(255,255,255,0.10) !important;
}

/* –±–∞–∑–æ–≤–∞—è –ø—É–ª—å—Å–∞—Ü–∏—è */
@keyframes mhMicPulse{
  0%   { filter: brightness(1); }
  50%  { filter: brightness(1.12); }
  100% { filter: brightness(1); }
}

/* SVG —è—Ä—á–µ + –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –≥—Ä–æ–º–∫–æ—Å—Ç–∏ */
.mh-voice-btn.recording .mh-voice-svg{
  fill: rgba(255,255,255,0.98) !important;
  filter:
    drop-shadow(0 0 calc(7px + (var(--mic-level, 0) * 18px)) rgba(168,85,247,1))
    drop-shadow(0 0 calc(14px + (var(--mic-level, 0) * 28px)) rgba(168,85,247,0.60)) !important;
}

/* –≤–Ω—É—Ç—Ä–µ–Ω–Ω—è—è ‚Äú–ª–∞–º–ø–∞‚Äù */
.mh-voice-btn.recording::before{
  opacity: calc(0.30 + (var(--mic-level, 0) * 0.55)) !important;
  filter: blur(calc(10px + (var(--mic-level, 0) * 12px))) !important;
}

/* –≤–Ω–µ—à–Ω—è—è –≤–æ–ª–Ω–∞ */
.mh-voice-btn.recording::after{
  opacity: calc(0.25 + (var(--mic-level, 0) * 0.45)) !important;
  border-color: rgba(168,85,247,0.70) !important;
  animation: mhMicWave 850ms ease-out infinite !important;
}

@keyframes mhMicWave{
  0%   { transform: scale(0.92); opacity: 0.0; }
  25%  { opacity: calc(0.25 + (var(--mic-level, 0) * 0.45)); }
  100% { transform: scale(calc(1.18 + (var(--mic-level, 0) * 0.70))); opacity: 0; }
}

/* ===== FIX 3: COLLAPSED MODE IMPROVEMENTS ===== */

/* ‚úÖ COLLAPSED: —Ç–æ–ª—å–∫–æ –∞–≤–∞—Ç–∞—Ä–∫–∞, –±–µ–∑ —Ä–∞–º–æ–∫/–∫–∞—Ä—Ç–æ—á–µ–∫ */
.mh-left.collapsed .mh-dialog-item{
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
}

.mh-left.collapsed .mh-dialog-content{
  background: transparent !important;
  border: none !important;
  box-shadow: none !important;
  padding: 8px 6px !important;
  justify-content: center;
}

/* ‚úÖ –ß—Ç–æ–±—ã –æ—Å—Ç–∞–≤–∞–ª–∞—Å—å —Ç–æ–ª—å–∫–æ –∞–∫–∫—É—Ä–∞—Ç–Ω–∞—è –∫—Ä—É–≥–ª–∞—è –∞–≤–∞—Ç–∞—Ä–∫–∞ */
.mh-left.collapsed .mh-dialog-ava{
  width: 44px;
  height: 44px;
  border-radius: 50%;
  overflow: hidden;
  border: none !important;      /* ‚úÖ —É–±—Ä–∞—Ç—å –æ–±–≤–æ–¥–∫—É */
  box-shadow: none !important;
}

/* ‚úÖ –∫—Ä–µ—Å—Ç–∏–∫ –≤ collapsed ‚Äî –º–∞–ª–µ–Ω—å–∫–∏–π –∏ –≤ —É–≥–ª—É, –Ω–µ –ª–æ–º–∞–µ—Ç —Å–µ—Ç–∫—É */
.mh-left.collapsed .mh-dialog-close{
  position: absolute;
  top: 6px;
  right: 6px;
  width: 20px;
  height: 20px;
  border-radius: 999px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 12px;
  line-height: 1;
  opacity: 0.75;
}

/* –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫—Ä–µ—Å—Ç–∏–∫ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ hover, —á—Ç–æ–±—ã –Ω–µ –º–µ—à–∞–ª */
.mh-left.collapsed .mh-dialog-item .mh-dialog-close{
  opacity: 0;
  pointer-events: none;
}
.mh-left.collapsed .mh-dialog-item:hover .mh-dialog-close{
  opacity: 0.9;
  pointer-events: auto;
}

/* ===== JUMP TO BOTTOM BUTTON ===== */
/* ‚úÖ —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ –ø–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–ª–∞—Å—å –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ —Ü–µ–Ω—Ç—Ä–∞ */
.mh-center{
  position: relative;
}

/* ‚úÖ Jump-to-bottom */
.mh-jump-bottom{
  position: absolute;
  right: 18px;
  bottom: 92px; /* –Ω–∞–¥ –∏–Ω–ø—É—Ç–æ–º */
  width: 44px;
  height: 44px;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: rgba(90, 90, 90, 0.22); /* —Å–µ—Ä—ã–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é */
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.35);
  display: grid;
  place-items: center;
  cursor: pointer;
  z-index: 50;
  transition: transform .15s ease, background .15s ease, border-color .15s ease;
}

.mh-jump-bottom:hover{
  transform: translateY(-1px);
}

.mh-jump-bottom.has-new{
  background: rgba(153, 85, 255, 0.28); /* —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π */
  border-color: rgba(170, 120, 255, 0.45);
  box-shadow: 0 10px 34px rgba(130, 70, 255, 0.25);
}

.mh-jump-arrow{
  font-size: 20px;
  line-height: 1;
  opacity: .95;
  transform: translateY(-1px);
}

/* ‚úÖ –±–µ–π–¥–∂ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ */
.mh-jump-badge{
  position: absolute;
  top: -6px;
  right: -6px;
  min-width: 20px;
  height: 20px;
  padding: 0 6px;
  border-radius: 999px;
  background: rgba(153, 85, 255, 0.95);
  border: 1px solid rgba(255,255,255,0.25);
  color: #fff;
  font-size: 12px;
  display: grid;
  place-items: center;
  box-shadow: 0 10px 24px rgba(130, 70, 255, 0.35);
}